{"ast":null,"code":"var _jsxFileName = \"/Users/loc/Desktop/Portfolio mo\\u0302n 5 /asm1/Frontend/src/components/browse/MovieList.jsx\";\nimport React, { useState, useEffect } from 'react';\nimport axios from '../../utils/axios';\nimport movieTrailer from 'movie-trailer';\nimport MovieDetail from '../../components/browse/MovieDetail';\nimport './MovieList.css';\nconst base_url = 'https://image.tmdb.org/t/p/original'; //??\n\nconst movies_limit = 10; //=20?\n\nfunction MovieList(_ref) {\n  let {\n    title,\n    fetchUrl,\n    isLargeRow\n  } = _ref;\n  const [movies, setMovies] = useState([]);\n  const [trailerUrl, setTrailerUrl] = useState('');\n  const [selectedMovie, setSelectedMovie] = useState(null);\n  useEffect(() => {\n    const fetchData = async () => {\n      await axios.get(fetchUrl, {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        params: {\n          page: 1\n        }\n      }).then(response => {\n        console.log(\"response.data:\", response.data);\n        setMovies(response.data.movies);\n        movies.sort((a, b) => b.popularity - a.popularity);\n        movies.splice(movies_limit);\n      }).catch(error => {\n        console.log(error);\n      });\n    };\n    fetchData();\n  }, [fetchUrl]);\n  const handleClick = movie => {\n    axios.post(\"/api/movies/video?token=8qlOkxz4wq\", {\n      id: movie.id\n    }).then(response => {\n      setTrailerUrl(response.data.key);\n      setSelectedMovie(movie);\n    }).catch(error => console.log(error));\n    // if (selectedMovie && selectedMovie.id === movie.id) {\n    // \tsetSelectedMovie(null);\n    // \tsetTrailerUrl('');\n    // } else {\n    // \tsetSelectedMovie(movie); \n    // \tmovieTrailer(movie?.title || '')\n    // \t.then((url) => {\n    // \t\tconst urlParams = new URLSearchParams(new URL(url).search);\n    // \t\tsetTrailerUrl(urlParams.get('v'));\n    // \t})\n    // \t.catch((error) => console.log(error));\n    // }\n  };\n\n  // movies.sort((a, b) => b.popularity - a.popularity);\n  // movies.splice(movies_limit);\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"movie-list-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 4\n    }\n  }, title), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row_posters sc2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 4\n    }\n  }, movies.map(movie => {\n    return /*#__PURE__*/React.createElement(\"img\", {\n      key: movie.id,\n      onClick: () => handleClick(movie),\n      className: `row_poster ${isLargeRow && 'row_posterLarge'}`,\n      src: `${base_url}${isLargeRow ? movie.poster_path : movie.backdrop_path}`,\n      alt: movie.name,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 7\n      }\n    });\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      padding: '40px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 4\n    }\n  }, selectedMovie && /*#__PURE__*/React.createElement(MovieDetail, {\n    movieData: selectedMovie,\n    movieTrailer: trailerUrl,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 23\n    }\n  })));\n}\nexport default MovieList;","map":{"version":3,"names":["React","useState","useEffect","axios","movieTrailer","MovieDetail","base_url","movies_limit","MovieList","title","fetchUrl","isLargeRow","movies","setMovies","trailerUrl","setTrailerUrl","selectedMovie","setSelectedMovie","fetchData","get","method","headers","params","page","then","response","console","log","data","sort","a","b","popularity","splice","catch","error","handleClick","movie","post","id","key","map","poster_path","backdrop_path","name","padding"],"sources":["/Users/loc/Desktop/Portfolio moÌ‚n 5 /asm1/Frontend/src/components/browse/MovieList.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from '../../utils/axios';\nimport movieTrailer from 'movie-trailer';\nimport MovieDetail from '../../components/browse/MovieDetail';\nimport './MovieList.css';\n\nconst base_url = 'https://image.tmdb.org/t/p/original';  //??\n\nconst movies_limit = 10; //=20?\n\nfunction MovieList({ title, fetchUrl, isLargeRow }) {\n\n\tconst [movies, setMovies] = useState([]);\n\tconst [trailerUrl, setTrailerUrl] = useState('');\n\tconst [selectedMovie, setSelectedMovie] = useState(null);\n\n\tuseEffect( () => {\n\t\t\tconst fetchData = async () => {\n\t\t\t\tawait axios\n\t\t\t\t  .get(fetchUrl, {\n\t\t\t\t\tmethod: \"GET\",\n\t\t\t\t\theaders: { \"Content-Type\": \"application/json\" },\n\t\t\t\t\tparams: { page: 1 },\n\t\t\t\t  })\n\t\t\t\t  .then((response) => {\n\t\t\t\t\tconsole.log(\"response.data:\", response.data);\n\t\t\t\t\tsetMovies(response.data.movies);\n\t\t\t\t\tmovies.sort((a, b) => b.popularity - a.popularity);\n\t\t\t\t\tmovies.splice(movies_limit);\n\t\t\t\t  })\n\t\t\t\t  .catch((error) => {\n\t\t\t\t\tconsole.log(error);\n\t\t\t\t  });\n\t\t\t  };\n\t\t\t  fetchData();\n\t}, [fetchUrl]\n\t);\n\n\tconst handleClick = (movie) => {\n\t\taxios\n\t\t.post(\"/api/movies/video?token=8qlOkxz4wq\", {id: movie.id})\n\t\t.then((response) => {\n\t\t\tsetTrailerUrl(response.data.key);\n\t\t\tsetSelectedMovie(movie);\n\t\t})\n\t\t.catch((error) => console.log(error))\n\t\t// if (selectedMovie && selectedMovie.id === movie.id) {\n\t\t// \tsetSelectedMovie(null);\n\t\t// \tsetTrailerUrl('');\n\t\t// } else {\n\t\t// \tsetSelectedMovie(movie); \n\t\t// \tmovieTrailer(movie?.title || '')\n\t\t// \t.then((url) => {\n\t\t// \t\tconst urlParams = new URLSearchParams(new URL(url).search);\n\t\t// \t\tsetTrailerUrl(urlParams.get('v'));\n\t\t// \t})\n\t\t// \t.catch((error) => console.log(error));\n\t\t// }\n\t};\n\n\t// movies.sort((a, b) => b.popularity - a.popularity);\n\t// movies.splice(movies_limit);\n\n\treturn (\n\t\t<div className='row'>\n\t\t\t<h2 className=\"movie-list-title\">{title}</h2>\n\t\t\t<div className='row_posters sc2'>\n\t\t\t\t{movies.map((movie) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tkey={movie.id}\n\t\t\t\t\t\t\tonClick={() => handleClick(movie)}\n\t\t\t\t\t\t\tclassName={`row_poster ${isLargeRow && 'row_posterLarge'}`}\n\t\t\t\t\t\t\tsrc={`${base_url}${\n\t\t\t\t\t\t\t\tisLargeRow ? movie.poster_path : movie.backdrop_path\n\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\talt={movie.name}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</div>\n\t\t\t<div style={{ padding: '40px' }}>\n\t\t\t\t{selectedMovie && <MovieDetail movieData={selectedMovie} movieTrailer={trailerUrl} />}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default MovieList;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}